<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sagittarius A* & Gravitational-Wave Simulator</title>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: radial-gradient(circle at center, #070010 0%, #000010 100%);
    color: white;
    overflow-x: hidden;
  }
  /* Tabs */
  .tabs { display:flex; background:#1a001f; border-bottom:2px solid #33003d; }
  .tabButton { flex:1; padding:12px; cursor:pointer; background:#22002b; border:none; color:#e5ccff; font-weight:bold; transition:0.3s; }
  .tabButton:hover { background:#33003d; }
  .tabButton.active { background:#550066; color:white; }
  .tabContent { display:none; padding:20px; }

  /* Overview */
  canvas { display:block; margin:0 auto; background:radial-gradient(circle at center, #12001c 0%, #000010 100%); border-radius:8px; }
  .label {
    position: absolute;
    color: #e5ccff;
    font-size: 14px;
    background: rgba(20, 0, 30, 0.6);
    padding: 5px 10px;
    border-radius: 6px;
    border: 1px solid rgba(120, 0, 180, 0.6);
    opacity: 0.9;
    pointer-events: auto;
  }
  .tooltip {
    position: absolute;
    max-width: 260px;
    font-size: 13px;
    line-height: 1.3em;
    padding: 8px;
    border-radius: 8px;
    background: rgba(30, 0, 50, 0.85);
    border: 1px solid #5a0090;
    color: #e5ccff;
    display: none;
  }
  #calculatorPanel {
    margin: 25px auto;
    padding: 15px 25px;
    max-width: 420px;
    background: rgba(25, 0, 40, 0.8);
    border: 1px solid #5a0090;
    border-radius: 10px;
    text-align: left;
    font-size: 14px;
  }
  #calculatorPanel input {
    width: 100%;
    margin-top: 4px;
    margin-bottom: 8px;
    background: #1a0030;
    color: #e5ccff;
    border: 1px solid #5a0090;
    border-radius: 4px;
    padding: 5px;
  }
  #calculatorPanel button {
    background: #8000ff;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    display: block;
    margin: 10px auto;
  }
  #calculatorPanel button:hover { background:#a64dff; }
  #calcResults { text-align:center; margin-top:8px; font-size:13px; color:#cdb7ff; }

  /* Events */
  #eventsTab canvas { border:1px solid #33003d; border-radius:8px; display:block; margin:15px auto; }
  #scienceSummary {
    background:rgba(30,0,40,0.7);
    padding:10px; border-radius:8px;
    margin-top:10px; border:1px solid #33003d;
  }
  #scienceSummary table {
    width:100%; border-collapse:collapse; margin-top:5px;
  }
  #scienceSummary th, #scienceSummary td {
    text-align:left; padding:6px; border-bottom:1px solid #440055; color:#e5ccff;
  }
</style>
</head>
<body>

<!-- Tabs -->
<div class="tabs">
  <button class="tabButton active" data-tab="overviewTab">Overview</button>
  <button class="tabButton" data-tab="eventsTab">Events</button>
</div>

<!-- Overview -->
<div id="overviewTab" class="tabContent" style="display:block;">
  <h2>üåå Sagittarius A* Overview</h2>
  <canvas id="overviewCanvas" width="900" height="500"></canvas>

  <!-- Labels -->
  <div id="labels">
    <div class="label" id="labelBH">Sagittarius A*</div>
    <div class="label" id="labelDisk">Accretion Disk</div>
    <div class="label" id="labelEH">Event Horizon</div>
    <div class="label" id="labelLens">Gravitational Lensing Zone</div>
  </div>
  <div id="tooltip" class="tooltip"></div>

  <!-- Calculator -->
  <div id="calculatorPanel">
    <strong>Sagittarius A* Time Dilation Calculator</strong><br><br>
    Radius r (m):<br>
    <input id="radiusInput" type="number" value="7.8e17" step="1e16">
    Dark Matter œÅ<sub>DM</sub> (kg/m¬≥):<br>
    <input id="densityInput" type="number" value="1e-21" step="1e-22">
    <button id="updateBtn">Run Calculation</button>
    <div id="calcResults"></div>
  </div>
</div>

<!-- Events Tab -->
<div id="eventsTab" class="tabContent">
  <h2>üí´ Gravitational-Wave Events</h2>
  <label for="eventSelect">Select Event:</label>
  <select id="eventSelect"></select>
  <button id="runCustomBtn">Run Custom Simulation</button>
  <button id="resetBtn">Reset</button><br>

  <label>M‚ÇÅ (M‚òâ):</label><input id="m1Input" type="number" value="30" step="0.1">
  <label>M‚ÇÇ (M‚òâ):</label><input id="m2Input" type="number" value="30" step="0.1">
  <label>Spin (a*):</label><input id="spinInput" type="number" value="0.5" step="0.1" min="0" max="1"><br>

  <canvas id="orbitCanvas" width="700" height="400"></canvas>
  <canvas id="chirpCanvas" width="800" height="200"></canvas>
  <button id="playChirpBtn">üîä Play Chirp</button>

  <div id="scienceSummary">
    <strong>Scientific Summary:</strong>
    <table>
      <tr><th>Parameter</th><th>Value</th></tr>
      <tr><td>Chirp Mass (‚Ñ≥)</td><td id="chirpMass">--</td></tr>
      <tr><td>Frequency Range (Hz)</td><td id="freqRange">--</td></tr>
      <tr><td>GW Strain (h)</td><td id="gwStrain">--</td></tr>
      <tr><td>Estimated Distance</td><td id="distance">--</td></tr>
    </table>
  </div>
</div>

<script>
/* ---- Tabs ---- */
const tabButtons=document.querySelectorAll('.tabButton');
const tabContents=document.querySelectorAll('.tabContent');
tabButtons.forEach(btn=>{
  btn.addEventListener('click',()=>{
    tabButtons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    tabContents.forEach(tc=>tc.style.display='none');
    document.getElementById(btn.dataset.tab).style.display='block';
  });
});

/* ---- Overview ---- */
const canvas=document.getElementById('overviewCanvas');
const ctx=canvas.getContext('2d');
const w=canvas.width, h=canvas.height;
const cx=w/2, cy=h/2;
let t=0;
const stars=Array.from({length:180},()=>({x:Math.random()*w,y:Math.random()*h,tw:Math.random()*Math.PI*2,r:Math.random()*1.3}));
const G=6.67430e-11, M=4.3e6*1.989e30, c=3e8;
let radius=7.8e17, rho=1e-21;
let gamma=calcGamma(radius);
let hotspotAngle=0, trail=[];
const maxTrail=80;
function calcGamma(r){const val=1-(G*M)/(r*c*c);return val>0?Math.sqrt(val):0;}
function drawBH(){
  ctx.clearRect(0,0,w,h);
  for(const s of stars){s.tw+=0.02;const bright=0.6+0.4*Math.sin(s.tw);
    ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,2*Math.PI);
    ctx.fillStyle=`rgba(255,255,255,${bright})`;ctx.fill();}
  const diskGrad=ctx.createRadialGradient(cx,cy,50,cx,cy,180);
  diskGrad.addColorStop(0,'rgba(255,160,60,0.2)');
  diskGrad.addColorStop(0.5,'rgba(255,100,0,0.08)');
  diskGrad.addColorStop(1,'rgba(100,0,150,0.05)');
  ctx.save();ctx.translate(cx,cy);ctx.rotate(0.1*Math.sin(t/100));ctx.scale(1,0.6);
  ctx.beginPath();ctx.arc(0,0,160,0,2*Math.PI);ctx.fillStyle=diskGrad;ctx.fill();
  const speed=0.02+(1-gamma)*0.5;const xh=Math.cos(hotspotAngle)*100;const yh=Math.sin(hotspotAngle)*40;
  hotspotAngle+=speed;trail.push({x:xh,y:yh});if(trail.length>maxTrail)trail.shift();
  for(let i=0;i<trail.length;i++){const a=i/trail.length;
    ctx.beginPath();ctx.arc(trail[i].x,trail[i].y,3,0,2*Math.PI);
    ctx.fillStyle=`rgba(255,200,100,${a*0.6})`;ctx.fill();}
  ctx.beginPath();ctx.arc(xh,yh,6,0,2*Math.PI);ctx.fillStyle='rgba(255,220,150,0.95)';
  ctx.shadowColor='rgba(255,180,80,0.6)';ctx.shadowBlur=20;ctx.fill();ctx.shadowBlur=0;
  ctx.restore();
  const horizonGrad=ctx.createRadialGradient(cx,cy,10,cx,cy,80);
  horizonGrad.addColorStop(0,'black');horizonGrad.addColorStop(1,'rgba(40,0,60,0.9)');
  ctx.beginPath();ctx.arc(cx,cy,80,0,2*Math.PI);ctx.fillStyle=horizonGrad;ctx.fill();
  const glowAlpha=0.4+Math.min(rho*1e21,1)*0.5;
  ctx.beginPath();ctx.arc(cx,cy,82,0,2*Math.PI);
  ctx.strokeStyle=`rgba(200,100,255,${glowAlpha})`;ctx.lineWidth=3;ctx.stroke();
  t++;requestAnimationFrame(drawBH);
}
drawBH();
document.getElementById('updateBtn').addEventListener('click',()=>{
  radius=parseFloat(document.getElementById('radiusInput').value);
  rho=parseFloat(document.getElementById('densityInput').value);
  gamma=calcGamma(radius);
  const Gamma_dark=1*(1+1e21*rho);
  document.getElementById('calcResults').innerHTML=
  `<small>Œ≥ = ${gamma.toFixed(6)}<br>Œì_dark = ${Gamma_dark.toExponential(2)}</small>`;
});

/* ---- GW Events ---- */
const gwEvents={
  "GW150914":{m1:36,m2:29,spin:0.3,color:'#a64dff'},
  "GW170104":{m1:31,m2:19,spin:0.5,color:'#00ccff'},
  "GW190521":{m1:85,m2:66,spin:0.7,color:'#ff66ff'},
  "Custom":{m1:30,m2:30,spin:0.5,color:'#ffffff'}
};
const eventSelect=document.getElementById('eventSelect');
for(let e in gwEvents){const opt=document.createElement('option');opt.value=e;opt.text=e;eventSelect.add(opt);}
const orbitCanvas=document.getElementById('orbitCanvas');const orbitCtx=orbitCanvas.getContext('2d');
let orbitAngle=0, orbitAnim;
function drawOrbit(m1,m2,spin,color){
  cancelAnimationFrame(orbitAnim);
  function animate(){
    orbitCtx.clearRect(0,0,orbitCanvas.width,orbitCanvas.height);
    const cx=orbitCanvas.width/2, cy=orbitCanvas.height/2;
    const r1=80, r2=160;
    const x1=cx+Math.cos(orbitAngle)*r1, y1=cy+Math.sin(orbitAngle)*r1;
    const x2=cx-Math.cos(orbitAngle)*r2, y2=cy-Math.sin(orbitAngle)*r2;
    orbitCtx.beginPath();orbitCtx.arc(x1,y1,10,0,2*Math.PI);
    orbitCtx.fillStyle=color;orbitCtx.fill();
    orbitCtx.beginPath();orbitCtx.arc(x2,y2,16,0,2*Math.PI);
    orbitCtx.fillStyle='#ffffff';orbitCtx.fill();
    orbitAngle+=0.02+spin*0.01;orbitAnim=requestAnimationFrame(animate);
  } animate();
}
function updateSummary(m1,m2){
  const chirpMass=Math.pow((m1*m2)**(3/5)/(m1+m2)**(1/5),1);
  document.getElementById('chirpMass').textContent=chirpMass.toFixed(2)+" M‚òâ";
  document.getElementById('freqRange').textContent="20‚Äì400 Hz";
  document.getElementById('gwStrain').textContent=(4e-21*(chirpMass/30)**(5/3)).toExponential(2);
  document.getElementById('distance').textContent=`${(chirpMass*40).toFixed(0)} million ly`;
}
function updateEvent(key){
  const ev=gwEvents[key];
  drawOrbit(ev.m1,ev.m2,ev.spin,ev.color);
  updateSummary(ev.m1,ev.m2);
}
eventSelect.addEventListener('change',()=>updateEvent(eventSelect.value));
document.getElementById('runCustomBtn').addEventListener('click',()=>{
  const m1=parseFloat(document.getElementById('m1Input').value);
  const m2=parseFloat(document.getElementById('m2Input').value);
  const spin=parseFloat(document.getElementById('spinInput').value);
  gwEvents.Custom={m1,m2,spin,color:'#ffffff'};
  eventSelect.value='Custom';updateEvent('Custom');
});
updateEvent('GW150914');
</script>
</body>
</html>
