<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Hole & GW Simulator</title>
<style>
  body { margin:0; font-family:Arial, sans-serif; background:#05000a; color:white; overflow-x:hidden; }
  .tabs { display:flex; background:#1a001f; border-bottom:2px solid #33003d; }
  .tabButton { flex:1; padding:12px; cursor:pointer; background:#22002b; border:none; color:#e5ccff; transition:0.3s; font-weight:bold; }
  .tabButton:hover { background:#33003d; }
  .tabButton.active { background:#550066; color:#fff; }
  .tabContent { display:none; padding:20px; }
  canvas { border:1px solid #33003d; border-radius:8px; display:block; margin:15px auto; background:radial-gradient(circle at center, #14001a 0%, #05000a 100%); }
  button, select, input { margin:5px 0; padding:8px; border:none; border-radius:4px; }
  button { background:#8000ff; color:white; cursor:pointer; transition:0.3s; }
  button:hover { background:#a64dff; }
  #eventInfo, #scienceSummary { background:rgba(30,0,40,0.7); padding:10px; border-radius:8px; margin-top:10px; border:1px solid #33003d; }
  #scienceSummary table { width:100%; border-collapse:collapse; margin-top:5px; }
  #scienceSummary th, #scienceSummary td { text-align:left; padding:6px; border-bottom:1px solid #440055; color:#e5ccff; }
  h2, h3, h4 { color:#e5ccff; }
</style>
</head>
<body>

<!-- Tabs -->
<div class="tabs">
  <button class="tabButton active" data-tab="overviewTab">Overview</button>
  <button class="tabButton" data-tab="eventsTab">Events</button>
</div>

<!-- Overview -->
<div id="overviewTab" class="tabContent" style="display:block;">
  <h2>üåå Black Hole Overview</h2>
  <p>Visualize a rotating black hole surrounded by its glowing accretion disk ‚Äî light bent by extreme gravity.</p>
  <canvas id="bhCanvas" width="800" height="400"></canvas>
</div>

 <!-- Events -->
<div id="eventsTab" class="tabContent">
  <h2>üí´ Gravitational-Wave Events</h2>
  <label for="eventSelect">Select Event:</label>
  <select id="eventSelect"></select>
  <button id="runCustomBtn">Run Custom Simulation</button><br>

  <label>M‚ÇÅ (M‚òâ):</label><input id="m1Input" type="number" value="30" step="0.1">
  <label>M‚ÇÇ (M‚òâ):</label><input id="m2Input" type="number" value="30" step="0.1"><br>
  <label>Spin 1 (0‚Äì1):</label><input id="spin1Input" type="number" value="0" min="0" max="1" step="0.01">
  <label>Spin 2 (0‚Äì1):</label><input id="spin2Input" type="number" value="0" min="0" max="1" step="0.01"><br>

  <canvas id="orbitCanvas" width="700" height="400"></canvas>
  <canvas id="chirpCanvas" width="800" height="200"></canvas>
  <button id="playChirpBtn">üîä Play Chirp</button>

  <div id="eventInfo">
    <strong>Event Information:</strong>
    <p id="eventDescription"></p>
  </div>

  <div id="scienceSummary">
    <strong>Scientific Summary:</strong>
    <table>
      <tr><th>Parameter</th><th>Value</th></tr>
      <tr><td>Chirp Mass (‚Ñ≥)</td><td id="chirpMass">--</td></tr>
      <tr><td>Frequency Range (Hz)</td><td id="freqRange">--</td></tr>
      <tr><td>GW Strain (h)</td><td id="gwStrain">--</td></tr>
      <tr><td>Estimated Distance</td><td id="distance">--</td></tr>
    </table>
    <h4>Chirp Amplitude Graph</h4>
    <canvas id="amplitudeCanvas" width="800" height="200"></canvas>
    <h4>Energy Loss Rate</h4>
    <canvas id="energyCanvas" width="800" height="200"></canvas>
    <h4>Frequency Evolution</h4>
    <canvas id="freqCanvas" width="800" height="200"></canvas>
  </div>
</div>

<script>
// --- GW Events Data ---
const gwEvents = {
  "GW150914": {m1:36, m2:29, spin1:0.3, spin2:0.2},
  "GW170104": {m1:31, m2:19, spin1:0.1, spin2:0.0},
  "Custom": {m1:30, m2:30, spin1:0, spin2:0}
};
const eventDescriptions = {
  "GW150914": "First gravitational wave detection (2015): two black holes of 36 and 29 solar masses merged 1.3 billion light-years away.",
  "GW170104": "2017 detection: merger of 31 and 19 solar-mass black holes, ~3 billion light-years away.",
  "Custom": "Set custom masses and spins."
};

// --- Populate Dropdown ---
const eventSelect = document.getElementById('eventSelect');
for(let e in gwEvents){
  const opt=document.createElement('option'); opt.value=e; opt.text=e;
  eventSelect.add(opt);
}

// --- Orbit Animation ---
const orbitCanvas = document.getElementById('orbitCanvas');
const orbitCtx = orbitCanvas.getContext('2d');
let orbitAngle = 0;
let angle1 = 0, angle2 = 0;

function drawOrbit(m1, m2, spin1=0, spin2=0){
  orbitCtx.fillStyle='rgba(0,0,0,0.2)';  // semi-transparent for trails
  orbitCtx.fillRect(0,0,orbitCanvas.width, orbitCanvas.height);

  const cx = orbitCanvas.width/2, cy = orbitCanvas.height/2;
  const r1 = 70, r2 = 140;

  const x1 = cx + Math.cos(orbitAngle) * r1 + Math.cos(angle1)*10;
  const y1 = cy + Math.sin(orbitAngle) * r1 + Math.sin(angle1)*10;

  const x2 = cx - Math.cos(orbitAngle) * r2 + Math.cos(angle2)*10;
  const y2 = cy - Math.sin(orbitAngle) * r2 + Math.sin(angle2)*10;

  // Draw orbit rings
  for(let i=0;i<4;i++){
    orbitCtx.beginPath();
    orbitCtx.arc(cx,cy,80+i*40,0,Math.PI*2);
    orbitCtx.strokeStyle=`rgba(160,0,255,${0.05*(4-i)})`;
    orbitCtx.stroke();
  }

  // Draw black holes
  orbitCtx.beginPath();
  orbitCtx.arc(x1,y1,10,0,Math.PI*2); orbitCtx.fillStyle='#ff66ff'; orbitCtx.fill();
  orbitCtx.beginPath();
  orbitCtx.arc(x2,y2,16,0,Math.PI*2); orbitCtx.fillStyle='#00ccff'; orbitCtx.fill();

  orbitAngle += 0.01;           // orbit speed
  angle1 += 0.05*spin1;         // spin1 rotation
  angle2 += 0.05*spin2;         // spin2 rotation

  requestAnimationFrame(()=>drawOrbit(m1,m2,spin1,spin2));
}

// --- Graph Drawing Helper ---
function drawGraph(ctx,color,func){
  ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);
  ctx.beginPath();
  for(let i=0;i<ctx.canvas.width;i++){
    const t=i/ctx.canvas.width;
    const y=ctx.canvas.height/2 - func(t)*ctx.canvas.height/3;
    i===0 ? ctx.moveTo(i,y) : ctx.lineTo(i,y);
  }
  ctx.strokeStyle=color;
  ctx.lineWidth=2;
  ctx.stroke();
}

// --- Chirp Generation ---
const chirpCanvas = document.getElementById('chirpCanvas');
const chirpCtx = chirpCanvas.getContext('2d');
let waveformData = [];

function createChirp(m1,m2,duration=3){
  const f0=20, f1=400;
  const sampleRate=chirpCanvas.width;
  waveformData=[];
  for(let i=0;i<sampleRate;i++){
    const t=i/sampleRate;
    waveformData.push(Math.sin(2*Math.PI*(f0+(f1-f0)*t)*t*duration*5)*Math.pow(t,2));
  }
  drawChirp();
}

function drawChirp(highlight=-1){
  chirpCtx.clearRect(0,0,chirpCanvas.width,chirpCanvas.height);
  chirpCtx.beginPath();
  chirpCtx.moveTo(0,chirpCanvas.height/2);
  for(let i=0;i<waveformData.length;i++){
    const x=i;
    const y=chirpCanvas.height/2 - waveformData[i]*chirpCanvas.height/2;
    i===0 ? chirpCtx.moveTo(x,y) : chirpCtx.lineTo(x,y);
  }
  chirpCtx.strokeStyle='#a64dff';
  chirpCtx.lineWidth=2;
  chirpCtx.stroke();

  if(highlight>=0){
    chirpCtx.beginPath();
    chirpCtx.moveTo(highlight,0);
    chirpCtx.lineTo(highlight,chirpCanvas.height);
    chirpCtx.strokeStyle='red';
    chirpCtx.lineWidth=1;
    chirpCtx.stroke();
  }
}

// --- Play Chirp ---
document.getElementById('playChirpBtn').addEventListener('click', ()=>{
  const audioCtx = new (window.AudioContext||window.webkitAudioContext)();
  const buffer = audioCtx.createBuffer(1,waveformData.length,44100);
  const data = buffer.getChannelData(0);
  for(let i=0;i<waveformData.length;i++) data[i]=waveformData[i]*0.3;
  const source = audioCtx.createBufferSource();
  source.buffer=buffer;
  source.connect(audioCtx.destination);
  source.start();

  const start = audioCtx.currentTime;
  function animate(){
    const elapsed = audioCtx.currentTime - start;
    if(elapsed>buffer.duration) return;
    const index=Math.floor(elapsed/buffer.duration*waveformData.length);
    drawChirp(index);
    requestAnimationFrame(animate);
  }
  animate();
});
// --- Update Summary ---
function updateSummary(m1,m2){
  const chirpMass = Math.pow((m1*m2)**(3/5)/(m1+m2)**(1/5),1);
  document.getElementById('chirpMass').textContent = chirpMass.toFixed(2) + " M‚òâ";
  document.getElementById('freqRange').textContent = "20‚Äì400 Hz";
  document.getElementById('gwStrain').textContent = (4e-21 * Math.pow(chirpMass/30, 5/3)).toExponential(2);
  document.getElementById('distance').textContent = `${(chirpMass*40).toFixed(0)} million ly`;
}
</script>

  </body>
</html>
