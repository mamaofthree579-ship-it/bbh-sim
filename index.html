!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BBH Simulation</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#0b0c1a; color:#eee; }
nav { display:flex; background:#1a1b2a; padding:10px; }
nav button { margin-right:10px; padding:10px; cursor:pointer; background:#2a2b3a; color:#fff; border:none; border-radius:5px; }
nav button.active { background:#5555aa; }
section { padding:20px; display:none; }
canvas { background:#111; display:block; margin:10px 0; border:1px solid #333; }
.info-panel { background:#222; padding:10px; margin:10px 0; border-radius:5px; }
button.btn { margin:5px 5px 5px 0; padding:5px 10px; }
.mini-window { position:absolute; background:#222; color:#fff; padding:10px; border-radius:5px; top:50px; left:50px; width:300px; display:none; }
.mini-window button.closeBtn { float:right; background:red; color:#fff; border:none; padding:2px 5px; cursor:pointer; }
</style>
</head>
<body>

<nav>
  <button class="tabBtn active" onclick="showTab('overview')">Overview</button>
  <button class="tabBtn" onclick="showTab('events')">Events</button>
  <button class="tabBtn" onclick="showTab('advanced')">Advanced Physics</button>
</nav>

<!-- Overview Tab -->
<section id="overview" style="display:block;">
  <h2>Overview</h2>
  <p>Single black hole illustration. Explore general black hole properties.</p>
  <div class="info-panel">
    <strong>Black Hole:</strong> Static visualization of a Schwarzschild black hole.
  </div>
  <canvas id="blackHoleOverview" width="400" height="400"></canvas>
</section>

<!-- Events Tab -->
<section id="events">
  <h2>Binary Black Hole Mergers</h2>
  <select id="eventSelect" onchange="onEventChange()">
    <option value="">-- Select Event --</option>
    <option value="GW150914">GW150914</option>
    <option value="GW151226">GW151226</option>
    <option value="GW170104">GW170104</option>
    <option value="GW170817">GW170817</option>
    <option value="Custom">Custom</option>
  </select>

  <div id="customParams">
    <p>Custom BBH Parameters:</p>
    <label>Mass 1 (M☉): <input id="customM1" type="number" value="30"></label>
    <label>Mass 2 (M☉): <input id="customM2" type="number" value="30"></label>
    <button class="btn" onclick="runCustom()">Run Simulation</button>
  </div>

  <div class="info-panel">
    <strong>Binary Black Hole Orbit:</strong> Orange and blue spheres represent merging black holes. Trails indicate motion history.
  </div>

  <canvas id="orbit3DEvent" width="400" height="400"></canvas>
  <canvas id="chirpGraphEvent" width="400" height="150"></canvas>
  <canvas id="spectrogramEvent" width="400" height="150"></canvas>

  <button class="btn" onclick="playEventChirp()">Play Chirp</button>
  <button class="btn" onclick="exportEventData()">Export Data</button>
  <audio id="chirpAudioEvent" src=""></audio>
</section>

<!-- Advanced Physics Tab -->
<section id="advanced">
  <h2>Advanced Physics</h2>
  <p>Open mini-windows to explore formulas and calculations.</p>
  <button class="btn" onclick="openMiniWindow('formulas')">Formulas</button>
  <button class="btn" onclick="openMiniWindow('calculators')">Calculators</button>
  
  <div id="formulas" class="mini-window">
    <button class="closeBtn" onclick="closeMiniWindow('formulas')">X</button>
    <h3>Formulas</h3>
    <p>Chirp mass, GW strain, neutrino flux, etc.</p>
  </div>
  
  <div id="calculators" class="mini-window">
    <button class="closeBtn" onclick="closeMiniWindow('calculators')">X</button>
    <h3>Calculators</h3>
    <p>Placeholder for future simulations.</p>
  </div>
</section>

<script>
// --- Tab Navigation ---
function showTab(tabId){
  document.querySelectorAll('section').forEach(s => s.style.display='none');
  document.getElementById(tabId).style.display='block';
  document.querySelectorAll('.tabBtn').forEach(b => b.classList.remove('active'));
  document.querySelector(`[onclick="showTab('${tabId}')"]`).classList.add('active');
}

// --- Mini Windows ---
function openMiniWindow(id){ document.getElementById(id).style.display='block'; }
function closeMiniWindow(id){ document.getElementById(id).style.display='none'; }

// --- Overview Black Hole ---
function drawBlackHole(canvasId){
  const c = document.getElementById(canvasId);
  const ctx = c.getContext('2d');
  const w = c.width, h = c.height;
  ctx.fillStyle = '#000';
  ctx.fillRect(0,0,w,h);
  ctx.beginPath();
  ctx.arc(w/2,h/2,80,0,Math.PI*2);
  const gradient = ctx.createRadialGradient(w/2,h/2,0,w/2,h/2,80);
  gradient.addColorStop(0,'#fff');
  gradient.addColorStop(1,'#000');
  ctx.fillStyle = gradient;
  ctx.fill();
}
drawBlackHole('blackHoleOverview');

// --- Events Visuals (Mock) ---
function drawOrbit3D(canvasId, m1, m2){
  const c = document.getElementById(canvasId);
  const ctx = c.getContext('2d');
  ctx.fillStyle = '#000'; ctx.fillRect(0,0,c.width,c.height);
  ctx.fillStyle = 'orange'; ctx.beginPath(); ctx.arc(100,200,15,0,2*Math.PI); ctx.fill();
  ctx.fillStyle = 'blue'; ctx.beginPath(); ctx.arc(300,200,15,0,2*Math.PI); ctx.fill();
}

function drawChirp(canvasId, m1, m2){
  const c = document.getElementById(canvasId);
  const ctx = c.getContext('2d');
  ctx.fillStyle = '#000'; ctx.fillRect(0,0,c.width,c.height);
  ctx.strokeStyle = '#0f0'; ctx.beginPath();
  for(let i=0;i<c.width;i++){
    const y = c.height/2 + Math.sin(i*0.05)*50*Math.exp(-i/400);
    ctx.lineTo(i,y);
  }
  ctx.stroke();
}

function drawSpectrogram(canvasId){
  const c = document.getElementById(canvasId);
  const ctx = c.getContext('2d');
  ctx.fillStyle = '#0b0c1a'; ctx.fillRect(0,0,c.width,c.height);
  for(let i=0;i<100;i++){
    for(let j=0;j<50;j++){
      ctx.fillStyle = `rgba(${i*2},${j*5},255,0.5)`; ctx.fillRect(i*4,j*3,4,3);
    }
  }
}

// --- Mock functions ---
function onEventChange(){ /* update visuals based on selected event */ }
function runCustom(){ alert('Custom simulation run!'); }
function playEventChirp(){ alert('Playing chirp (mock)'); }
function exportEventData(){ alert('Exported event data (mock)'); }

// --- Initialize Events Tab Visuals ---
drawOrbit3D('orbit3DEvent',30,30);
drawChirp('chirpGraphEvent',30,30);
drawSpectrogram('spectrogramEvent');
</script>

</body>
</html>
