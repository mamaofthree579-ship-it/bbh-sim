<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sagittarius A* & Gravitational-Wave Simulator</title>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:#05000a; color:#e5ccff; overflow-x:hidden; }
  .tabs { display:flex; background:#1a001f; border-bottom:2px solid #33003d; }
  .tabButton { flex:1; padding:12px; cursor:pointer; background:#22002b; border:none; color:#e5ccff; font-weight:bold; transition:0.3s; }
  .tabButton:hover { background:#33003d; }
  .tabButton.active { background:#550066; color:white; }
  .tabContent { display:none; padding:20px; }
  canvas { border:1px solid #33003d; border-radius:8px; display:block; margin:15px auto;
           background:radial-gradient(circle at center, #14001a 0%, #05000a 100%); }
  h2,h3 { color:#e5ccff; }
  label { color:#d0b8ff; font-size:0.9em; }
  input, select, button { margin:5px; padding:6px; border:none; border-radius:4px; }
  button { background:#8000ff; color:white; cursor:pointer; transition:0.3s; }
  button:hover { background:#a64dff; }
  #overviewControls { text-align:center; margin-top:10px; background:rgba(20,0,40,0.5); padding:10px; border-radius:8px; }
  #labels { text-align:center; font-size:0.9em; color:#d0b8ff; }
  #eventLayout { display:flex; flex-wrap:wrap; gap:20px; }
  #leftColumn, #rightColumn { flex:1; min-width:360px; background:rgba(25,0,35,0.5); padding:15px; border-radius:10px; border:1px solid #33003d; }
  #dataTable { width:100%; border-collapse:collapse; color:#e5ccff; margin-bottom:10px; }
  #dataTable th, #dataTable td { border-bottom:1px solid #440055; padding:4px 6px; text-align:left; }
</style>
</head>
<body>

<!-- Tabs -->
<div class="tabs">
  <button class="tabButton active" data-tab="overviewTab">Overview</button>
  <button class="tabButton" data-tab="eventsTab">Events</button>
</div>

<!-- Overview -->
<div id="overviewTab" class="tabContent" style="display:block;">
  <h2>üåå Sagittarius A* Overview</h2>
  <p>Observe Sagittarius A*, the supermassive black hole at our galaxy's center, with a rotating hotspot and luminous accretion disk.</p>
  <canvas id="bhCanvas" width="800" height="400"></canvas>
  <div id="overviewControls">
    <label>Motion Speed:</label>
    <input id="speedSlider" type="range" min="0.01" max="0.1" step="0.005" value="0.03">
  </div>
  <div id="labels">
    <p><strong>Labels:</strong> üï≥Ô∏è Black Hole | ‚òÄÔ∏è Accretion Disk | üî• Hotspot | ‚ú® Stars</p>
  </div>
</div>

<!-- Events Tab -->
<div id="eventsTab" class="tabContent">
  <h2>üí´ Gravitational-Wave Events</h2>
  <div id="eventLayout">
    <!-- Left Column -->
    <div id="leftColumn">
      <label>Select Event:</label>
      <select id="eventSelect"></select><br>
      <label>M‚ÇÅ (M‚òâ):</label><input id="m1Input" type="number" value="30" step="0.1">
      <label>M‚ÇÇ (M‚òâ):</label><input id="m2Input" type="number" value="30" step="0.1">
      <label>Spin (a*):</label><input id="spinInput" type="number" value="0.5" step="0.1" min="0" max="1"><br>
      <button id="runCustomBtn">Run Custom Simulation</button>
      <button id="resetBtn">Reset</button>
      <canvas id="orbitCanvas" width="360" height="300"></canvas>
    </div>

    <!-- Right Column -->
    <div id="rightColumn">
      <button id="playChirpBtn">üîä Play Chirp</button>
      <canvas id="chirpCanvas" width="400" height="150"></canvas>
      <h3>Scientific Summary</h3>
      <table id="dataTable">
        <tr><th>Parameter</th><th>Value</th></tr>
        <tr><td>Chirp Mass (‚Ñ≥)</td><td id="chirpMass">--</td></tr>
        <tr><td>Peak Frequency (Hz)</td><td id="freqRange">--</td></tr>
        <tr><td>GW Strain (h)</td><td id="gwStrain">--</td></tr>
        <tr><td>Distance</td><td id="distance">--</td></tr>
      </table>

      <h3>Event Comparison Charts</h3>
      <canvas id="ampChart" width="380" height="100"></canvas>
      <canvas id="energyChart" width="380" height="100"></canvas>
      <canvas id="freqChart" width="380" height="100"></canvas>
    </div>
  </div>
</div>

<script>
// --- Tab Switching ---
const tabButtons=document.querySelectorAll('.tabButton');
const tabContents=document.querySelectorAll('.tabContent');
tabButtons.forEach(btn=>{
  btn.addEventListener('click',()=>{
    tabButtons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    tabContents.forEach(tc=>tc.style.display='none');
    document.getElementById(btn.dataset.tab).style.display='block';
  });
});

// --- Overview Animation ---
const bhCanvas=document.getElementById('bhCanvas');
const bhCtx=bhCanvas.getContext('2d');
const stars=Array.from({length:150},()=>({x:Math.random()*bhCanvas.width,y:Math.random()*bhCanvas.height,r:Math.random()*1.2,tw:Math.random()*2*Math.PI}));
let bhAngle=0;
let speed=parseFloat(document.getElementById('speedSlider').value);

function drawBH(){
  bhCtx.clearRect(0,0,bhCanvas.width,bhCanvas.height);
  const cx=bhCanvas.width/2, cy=bhCanvas.height/2, rBH=70;
  stars.forEach(s=>{
    s.tw+=0.05; const b=0.6+0.4*Math.sin(s.tw);
    if(Math.hypot(s.x-cx,s.y-cy)>rBH+20){bhCtx.beginPath();bhCtx.arc(s.x,s.y,s.r,0,2*Math.PI);bhCtx.fillStyle=`rgba(255,255,255,${b})`;bhCtx.fill();}
  });
  const grad=bhCtx.createRadialGradient(cx,cy,10,cx,cy,200);
  grad.addColorStop(0,'#000'); grad.addColorStop(1,'#220033');
  bhCtx.fillStyle=grad; bhCtx.fillRect(0,0,bhCanvas.width,bhCanvas.height);
  bhCtx.beginPath(); bhCtx.arc(cx,cy,rBH,0,2*Math.PI); bhCtx.fillStyle='black'; bhCtx.fill();
  const ringGrad=bhCtx.createRadialGradient(cx,cy,rBH,cx,cy,rBH+60);
  ringGrad.addColorStop(0,'rgba(255,200,100,0.25)');
  ringGrad.addColorStop(1,'rgba(255,150,0,0.05)');
  bhCtx.beginPath(); bhCtx.arc(cx,cy,rBH+30,0,2*Math.PI); bhCtx.strokeStyle='rgba(255,180,60,0.5)'; bhCtx.lineWidth=2; bhCtx.stroke();

  const x=cx+Math.cos(bhAngle)*100, y=cy+Math.sin(bhAngle)*40;
  bhCtx.beginPath(); bhCtx.arc(x,y,6,0,2*Math.PI); bhCtx.fillStyle='#ffcc99'; bhCtx.fill();
  for(let i=1;i<15;i++){const tx=cx+Math.cos(bhAngle-i*0.1)*100,ty=cy+Math.sin(bhAngle-i*0.1)*40;bhCtx.beginPath();bhCtx.arc(tx,ty,2,0,2*Math.PI);bhCtx.fillStyle=`rgba(255,200,150,${0.15-i*0.01})`;bhCtx.fill();}
  bhAngle+=speed; requestAnimationFrame(drawBH);
}
document.getElementById('speedSlider').addEventListener('input',e=>speed=parseFloat(e.target.value));
drawBH();

// --- Events Tab ---
const gwEvents={
  "GW150914":{m1:36,m2:29,spin:0.3,color:'#a64dff',distance:"1.3B ly"},
  "GW170104":{m1:31,m2:19,spin:0.5,color:'#00ccff',distance:"3.0B ly"},
  "GW170817":{m1:1.4,m2:1.4,spin:0.1,color:'#ffcc00',distance:"130M ly"},
  "GW190521":{m1:85,m2:66,spin:0.7,color:'#ff66ff',distance:"5.3B ly"},
  "GW190814":{m1:23,m2:2.6,spin:0.5,color:'#ff9966',distance:"240M ly"},
  "GW200105":{m1:9,m2:1.9,spin:0.4,color:'#66ccff',distance:"900M ly"},
  "GW200115":{m1:6,m2:1.4,spin:0.2,color:'#66ff99',distance:"1.0B ly"},
  "Custom":{m1:30,m2:30,spin:0.5,color:'#ffffff',distance:"--"}
};
const eventSelect=document.getElementById('eventSelect');
for(let e in gwEvents){let opt=document.createElement('option');opt.value=e;opt.text=e;eventSelect.add(opt);}

const orbitCanvas=document.getElementById('orbitCanvas');
const orbitCtx=orbitCanvas.getContext('2d');
const chirpCanvas=document.getElementById('chirpCanvas');
const chirpCtx=chirpCanvas.getContext('2d');
const ampChart=document.getElementById('ampChart').getContext('2d');
const energyChart=document.getElementById('energyChart').getContext('2d');
const freqChart=document.getElementById('freqChart').getContext('2d');
let orbitAngle=0, orbitAnim;

function drawOrbit(m1,m2,spin,color){
  cancelAnimationFrame(orbitAnim);
  function animate(){
    orbitCtx.clearRect(0,0,orbitCanvas.width,orbitCanvas.height);
    const cx=orbitCanvas.width/2, cy=orbitCanvas.height/2;
    const r1=50+(m2/(m1+m2))*40, r2=50+(m1/(m1+m2))*40;
    const x1=cx+Math.cos(orbitAngle)*r1, y1=cy+Math.sin(orbitAngle)*r1;
    const x2=cx-Math.cos(orbitAngle)*r2, y2=cy-Math.sin(orbitAngle)*r2;
    orbitCtx.beginPath(); orbitCtx.arc(x1,y1,8,0,2*Math.PI); orbitCtx.fillStyle=color; orbitCtx.fill();
    orbitCtx.beginPath(); orbitCtx.arc(x2,y2,12,0,2*Math.PI); orbitCtx.fillStyle='#fff'; orbitCtx.fill();
    orbitAngle+=0.03+spin*0.01;
    orbitAnim=requestAnimationFrame(animate);
  }
  animate();
}

function updateSummary(m1,m2,ev){
  const chirpMass=Math.pow((m1*m2)**(3/5)/(m1+m2)**(1/5),1);
  document.getElementById('chirpMass').textContent=chirpMass.toFixed(2)+" M‚òâ";
  document.getElementById('freqRange').textContent="20‚Äì400 Hz";
  document.getElementById('gwStrain').textContent=(4e-21*(chirpMass/30)**(5/3)).toExponential(2);
  document.getElementById('distance').textContent=gwEvents[ev].distance;
  drawChirp(chirpCtx,gwEvents[ev].color);
  drawCharts(ampChart,energyChart,freqChart,gwEvents[ev].color);
}

function drawChirp(ctx,color){
  ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);
  ctx.beginPath();
  for(let i=0;i<ctx.canvas.width;i++){
    const t=i/ctx.canvas.width;
    const y=ctx.canvas.height/2 - Math.sin(10*Math.PI*t**3*5)*(t**3)*ctx.canvas.height/3;
    if(i===0)ctx.moveTo(i,y); else ctx.lineTo(i,y);
  }
  ctx.strokeStyle=color; ctx.lineWidth=2; ctx.stroke();
}

function drawCharts(aCtx,eCtx,fCtx,color){
  // Amplitude vs Time
  aCtx.clearRect(0,0,aCtx.canvas.width,aCtx.canvas.height);
  aCtx.beginPath();
  for(let x=0;x<aCtx.canvas.width;x++){
    const t=x/aCtx.canvas.width;
    const y=aCtx.canvas.height/2 - Math.sin(2*Math.PI*t*5)*t*aCtx.canvas.height/3;
    x===0 ? aCtx.moveTo(x,y):aCtx.lineTo(x,y);
  }
  aCtx.strokeStyle=color; aCtx.stroke();
  // Energy vs Frequency
  eCtx.clearRect(0,0,eCtx.canvas.width,eCtx.canvas.height);
  eCtx.beginPath();
  for(let x=0;x<eCtx.canvas.width;x++){
    const f=x/eCtx.canvas.width;
    const y=eCtx.canvas.height - Math.pow(f,2)*eCtx.canvas.height;
    x===0 ? eCtx.moveTo(x,y):eCtx.lineTo(x,y);
  }
  eCtx.strokeStyle=color; eCtx.stroke();
  // Frequency Evolution
  fCtx.clearRect(0,0,fCtx.canvas.width,fCtx.canvas.height);
  fCtx.beginPath();
  for(let x=0;x<fCtx.canvas.width;x++){
    const t=x/fCtx.canvas.width;
    const y=fCtx.canvas.height - (Math.pow(t,3)*fCtx.canvas.height*0.9);
    x===0 ? fCtx.moveTo(x,y):fCtx.lineTo(x,y);
  }
  fCtx.strokeStyle=color; fCtx.stroke();
}

function playChirp(fStart,fEnd,duration){
  try{
    const audio=new (window.AudioContext||window.webkitAudioContext)();
    const osc=audio.createOscillator(), gain=audio.createGain();
    osc.connect(gain); gain.connect(audio.destination);
    osc.frequency.setValueAtTime(fStart,audio.currentTime);
    osc.frequency.exponentialRampToValueAtTime(fEnd,audio.currentTime+duration);
    gain.gain.setValueAtTime(0.2,audio.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001,audio.currentTime+duration);
    osc.start(); osc.stop(audio.currentTime+duration);
  }catch(e){console.log("Audio error:",e);}
}

function updateEvent(ev){
  const e=gwEvents[ev];
  drawOrbit(e.m1,e.m2,e.spin,e.color);
  updateSummary(e.m1,e.m2,ev);
}

document.getElementById('runCustomBtn').addEventListener('click',()=>{
  const m1=parseFloat(document.getElementById('m1Input').value);
  const m2=parseFloat(document.getElementById('m2Input').value);
  const spin=parseFloat(document.getElementById('spinInput').value);
  gwEvents["Custom"]={m1,m2,spin,color:'#ffffff',distance:"--"};
  eventSelect.value="Custom";
  updateEvent("Custom");
});

document.getElementById('resetBtn').addEventListener('click',()=>updateEvent(eventSelect.value));

document.getElementById('playChirpBtn').addEventListener('click',()=>{
  const ev=gwEvents[eventSelect.value];
  const chirpMass=Math.pow((ev.m1*ev.m2)**(3/5)/(ev.m1+ev.m2)**(1/5),1);
  const fStart=30+ev.spin*10, fEnd=300+(chirpMass/30)*300;
  playChirp(fStart,fEnd,2);
});

eventSelect.addEventListener('change',()=>updateEvent(eventSelect.value));
updateEvent("GW150914");
</script>
</body>
</html>
