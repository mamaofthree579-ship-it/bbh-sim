<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sagittarius A* & Gravitational Wave Explorer</title>
<style>
body{
  margin:0;
  font-family:"Segoe UI",sans-serif;
  color:#f5f5f5;
  background:radial-gradient(ellipse at center,#0a0015,#000010);
  overflow:hidden;
}
header{
  text-align:center;
  padding:15px 0;
  font-size:1.5rem;
  letter-spacing:0.5px;
  color:#d8baff;
  background:rgba(20,0,40,0.6);
  box-shadow:0 0 10px #321061 inset;
}
nav{
  display:flex;
  justify-content:center;
  gap:8px;
  background:#14002e;
  padding:10px;
}
.tabButton{
  background:#28104a;
  border:none;
  color:#fff;
  padding:8px 16px;
  border-radius:8px;
  cursor:pointer;
  transition:0.2s;
}
.tabButton:hover{background:#3b1a6a;}
.tabButton.active{background:#7038d4;}

.tabContent{display:none; text-align:center; padding:20px;}
canvas{border-radius:8px;}

.legend{
  display:flex;
  justify-content:center;
  gap:16px;
  margin-top:10px;
}
.legend div{
  padding:4px 10px;
  border-radius:6px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.15);
  cursor:help;
  font-size:0.85rem;
}
#tooltip{
  position:absolute;
  display:none;
  background:rgba(0,0,0,0.85);
  padding:8px;
  border-radius:6px;
  font-size:0.8rem;
  pointer-events:none;
  color:#ffebff;
  border:1px solid rgba(255,255,255,0.2);
  max-width:260px;
}
.calc-container{
  margin-top:18px;
  background:rgba(255,255,255,0.05);
  display:inline-block;
  padding:12px 16px;
  border-radius:10px;
  text-align:left;
}
.calc-container input{
  background:rgba(0,0,0,0.3);
  color:#fff;
  border:none;
  border-bottom:1px solid #777;
  padding:3px 5px;
  width:120px;
  margin-left:5px;
}
.calc-container button{
  margin-top:8px;
  background:#7038d4;
  color:#fff;
  border:none;
  border-radius:6px;
  padding:4px 10px;
  cursor:pointer;
}
.calc-container button:hover{background:#8f56e0;}
#calcResults{
  font-size:0.9rem;
  margin-top:6px;
  color:#f5d6ff;
}
.eventContainer{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
}
.eventTable{
  margin:auto;
  border-collapse:collapse;
  background:rgba(255,255,255,0.04);
  border-radius:10px;
  overflow:hidden;
}
.eventTable td, .eventTable th{
  padding:6px 10px;
  border-bottom:1px solid rgba(255,255,255,0.1);
}
.eventTable th{background:rgba(255,255,255,0.07);}
</style>
</head>

<body>
<header>üåÄ Sagittarius A* & Gravitational Wave Explorer</header>
<nav>
  <button class="tabButton active" data-tab="overviewTab">Overview</button>
  <button class="tabButton" data-tab="eventsTab">Events</button>
</nav>

<!-- ---------------- Overview ---------------- -->
<section id="overviewTab" class="tabContent" style="display:block;">
  <canvas id="bhCanvas" width="700" height="500"></canvas>
  <div class="legend">
    <div data-tooltip="eh">Event Horizon</div>
    <div data-tooltip="ad">Accretion Disk</div>
    <div data-tooltip="jet">Jet</div>
  </div>
  <div class="calc-container">
    <div><label>Radius r (m):</label><input id="radiusInput" type="number" value="7.8e17"></div>
    <div><label>Dark Matter Density œÅ (kg/m¬≥):</label><input id="densityInput" type="number" value="1e-21"></div>
    <button id="runCalcBtn">Run Calculation</button>
    <div id="calcResults"></div>
  </div>
</section>

<!-- ---------------- Events ---------------- -->
<section id="eventsTab" class="tabContent">
  <div class="eventContainer">
    <label for="eventSelect">Select Event:</label>
    <select id="eventSelect"></select>
    <div id="eventDescription" style="font-style:italic;color:#d0b0ff;"></div>

    <canvas id="orbitCanvas" width="420" height="250"></canvas>
    <canvas id="chirpCanvas" width="420" height="180"></canvas>

    <table class="eventTable">
      <tr><th>Chirp Mass</th><td id="chirpMass"></td></tr>
      <tr><th>Peak Frequency</th><td id="freqRange"></td></tr>
      <tr><th>GW Strain (h)</th><td id="gwStrain"></td></tr>
      <tr><th>Distance</th><td id="distance"></td></tr>
      <tr><th>Spin</th><td id="spinOut"></td></tr>
      <tr><th>Energy Radiated</th><td id="energyOut"></td></tr>
    </table>
  </div>
</section>

<div id="tooltip"></div>

<script>
/* ---------------- Tabs ---------------- */
document.querySelectorAll('.tabButton').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('.tabButton').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.tabContent').forEach(c=>c.style.display='none');
    document.getElementById(btn.dataset.tab).style.display='block';
    tooltip.style.display='none';
  });
});

/* ---------------- Overview ---------------- */
const bhCanvas=document.getElementById('bhCanvas');
const bhCtx=bhCanvas.getContext('2d');
const bhCx=bhCanvas.width/2, bhCy=bhCanvas.height/2;
let bhHotAngle=0;
function drawOverview(){
  bhCtx.clearRect(0,0,bhCanvas.width,bhCanvas.height);
  const g=bhCtx.createRadialGradient(bhCx,bhCy,10,bhCx,bhCy,300);
  g.addColorStop(0,'#070012'); g.addColorStop(1,'#010006');
  bhCtx.fillStyle=g; bhCtx.fillRect(0,0,bhCanvas.width,bhCanvas.height);
  // horizon
  bhCtx.beginPath(); bhCtx.arc(bhCx,bhCy,70,0,Math.PI*2);
  bhCtx.strokeStyle='rgba(140,80,255,0.35)'; bhCtx.lineWidth=2; bhCtx.stroke();
  // accretion
  for(let i=0;i<40;i++){
    bhCtx.beginPath(); bhCtx.arc(bhCx,bhCy,78+i*3,0,Math.PI*2);
    bhCtx.strokeStyle=`rgba(255,180,80,${0.006+i*0.0006})`; bhCtx.stroke();
  }
  // hotspot trail
  const hx = bhCx + Math.cos(bhHotAngle)*110;
  const hy = bhCy + Math.sin(bhHotAngle)*34;
  for(let k=0;k<8;k++){
    const t=bhHotAngle-k*0.1;
    const tx=bhCx+Math.cos(t)*(110-k*6);
    const ty=bhCy+Math.sin(t)*(34-k*2);
    bhCtx.beginPath(); bhCtx.arc(tx,ty,4-k*0.36,0,Math.PI*2);
    bhCtx.fillStyle=`rgba(255,220,180,${0.12*(8-k)})`; bhCtx.fill();
  }
  bhCtx.beginPath(); bhCtx.arc(hx,hy,6,0,Math.PI*2); bhCtx.fillStyle='#ffcc99'; bhCtx.fill();
  bhHotAngle+=0.026;
  requestAnimationFrame(drawOverview);
}
drawOverview();

/* Tooltip legend */
const tooltip=document.getElementById('tooltip');
const tooltipData={
  "eh":"Event horizon ‚Äî radius where escape speed equals c.",
  "ad":"Accretion disk ‚Äî hot, rotating plasma swirling around Sagittarius A*.",
  "jet":"Relativistic jet ‚Äî energy outflow from black hole poles."
};
document.querySelectorAll('.legend div').forEach(div=>{
  const key=div.dataset.tooltip;
  div.addEventListener('mouseenter',e=>{
    tooltip.textContent=tooltipData[key]||'';
    tooltip.style.left=(e.clientX+12)+'px';
    tooltip.style.top=(e.clientY+12)+'px';
    tooltip.style.display='block';
  });
  div.addEventListener('mousemove',e=>{
    tooltip.style.left=(e.clientX+12)+'px';
    tooltip.style.top=(e.clientY+12)+'px';
  });
  div.addEventListener('mouseleave',()=>tooltip.style.display='none');
});

/* Calculator */
document.getElementById('runCalcBtn').addEventListener('click',()=>{
  const G=6.67430e-11, M=4.3e6*1.989e30, c=3e8;
  const r=parseFloat(radiusInput.value)||7.8e17;
  const rho=parseFloat(densityInput.value)||1e-21;
  const val=1-(G*M)/(r*c*c);
  const gamma=val>0?Math.sqrt(val):0;
  const Gamma_dark=(1+1e21*rho);
  calcResults.innerHTML=`Œ≥ = <b>${gamma.toFixed(6)}</b> | Œì_dark ‚âà <b>${Gamma_dark.toExponential(2)}</b>`;
});

/* ---------------- Events ---------------- */
const events={
  "GW150914":{m1:36,m2:29,spin:0.33,dist:440,chirp:28,freq:150,h:1e-21,energy:3,color:"#a64dff",desc:"First detection (2015)"},
  "GW151226":{m1:14,m2:7.5,spin:0.2,dist:440,chirp:9,freq:220,h:3e-22,energy:1,color:"#33ccff",desc:"Second detection"},
  "GW170104":{m1:31,m2:19,spin:0.45,dist:880,chirp:21,freq:200,h:7e-22,energy:2,color:"#00ccff",desc:"Detected Jan 2017"},
  "GW170814":{m1:30.5,m2:25.3,spin:0.06,dist:540,chirp:24.2,freq:190,h:8e-22,energy:2.7,color:"#ffcc00",desc:"First triple-detector event"},
  "GW170817":{m1:1.46,m2:1.27,spin:0.05,dist:40,chirp:1.19,freq:400,h:2e-23,energy:0.025,color:"#66ff99",desc:"Binary neutron star"},
  "GW190412":{m1:30,m2:8,spin:0.25,dist:740,chirp:13,freq:230,h:5e-22,energy:1.6,color:"#ffaa66",desc:"Asymmetric BH merger"},
  "GW190521":{m1:85,m2:66,spin:0.7,dist:5300,chirp:64,freq:60,h:3e-21,energy:8,color:"#ff9933",desc:"Most massive detected"},
  "GW190814":{m1:23,m2:2.6,spin:0.05,dist:240,chirp:6.1,freq:300,h:6e-22,energy:0.6,color:"#ffd166",desc:"BH + compact object"},
  "Custom":{m1:30,m2:30,spin:0.5,dist:500,chirp:26,freq:200,h:8e-22,energy:2,color:"#b666ff",desc:"User-defined system"}
};
const eventSelect=document.getElementById('eventSelect');
for(const k in events){
  const o=document.createElement('option');
  o.value=k; o.textContent=k; eventSelect.appendChild(o);
}

/* concise info table */
function updateEventTable(ev){
  chirpMass.textContent=ev.chirp.toFixed(2)+" M‚òâ";
  freqRange.textContent=ev.freq+" Hz";
  gwStrain.textContent=ev.h.toExponential(2);
  distance.textContent=ev.dist+" Mpc";
  spinOut.textContent=ev.spin.toFixed(2);
  energyOut.textContent=ev.energy+" M‚òâc¬≤";
}

/* Orbit + Chirp visuals */
const orbitCanvas=document.getElementById('orbitCanvas');
const ox=orbitCanvas.getContext('2d');
let orbitAnim=null;
function startOrbitSim(ev){
  cancelAnimationFrame(orbitAnim);
  let angle=0;
  const cx=orbitCanvas.width/2, cy=orbitCanvas.height/2;
  function frame(){
    ox.clearRect(0,0,orbitCanvas.width,orbitCanvas.height);
    ox.fillStyle="rgba(10,0,20,0.7)";
    ox.fillRect(0,0,orbitCanvas.width,orbitCanvas.height);
    const r=120;
    const x1=cx+Math.cos(angle)*r, y1=cy+Math.sin(angle)*r;
    const x2=cx-Math.cos(angle)*r, y2=cy-Math.sin(angle)*r;
    ox.beginPath(); ox.arc(x1,y1,10,0,Math.PI*2); ox.fillStyle=ev.color; ox.fill();
    ox.beginPath(); ox.arc(x2,y2,16,0,Math.PI*2); ox.fillStyle="#ffffff33"; ox.fill();
    angle+=0.02;
    orbitAnim=requestAnimationFrame(frame);
  }
  frame();
}

/* Chirp waveform */
const chirpCanvas=document.getElementById('chirpCanvas');
const cctx=chirpCanvas.getContext('2d');
function drawChirp(ev){
  const W=chirpCanvas.width, H=chirpCanvas.height;
  cctx.clearRect(0,0,W,H);
  cctx.beginPath();
  for(let i=0;i<W;i++){
    const t=i/W;
    const amp=Math.pow(t,2)*Math.exp(-1.5*(1-t));
    const freq=ev.freq*(1+2*t);
    const y=H/2-amp*Math.sin(2*Math.PI*freq*t/300)*H*0.4;
    if(i===0) cctx.moveTo(i,y); else cctx.lineTo(i,y);
  }
  cctx.strokeStyle=ev.color; cctx.lineWidth=2; cctx.stroke();
}

/* Event change */
eventSelect.addEventListener('change',()=>{
  const ev=events[eventSelect.value];
  eventDescription.textContent=ev.desc;
  updateEventTable(ev);
  drawChirp(ev);
  startOrbitSim(ev);
});

/* default */
eventSelect.value='GW150914';
eventSelect.dispatchEvent(new Event('change'));
</script>
</body>
</html>
