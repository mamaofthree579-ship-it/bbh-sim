<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gravitational-Wave Events</title>
<style>
  body { margin:0; background:#05000a; color:white; font-family:Arial, sans-serif; overflow-x:hidden; }
  .tabs { display:flex; background:#1a001f; border-bottom:2px solid #33003d; }
  .tabButton { flex:1; padding:12px; background:#22002b; border:none; color:#e5ccff; font-weight:bold; cursor:pointer; transition:0.3s; }
  .tabButton:hover { background:#33003d; }
  .tabButton.active { background:#550066; color:white; }
  .tabContent { display:none; padding:20px; }
  canvas { border:1px solid #33003d; border-radius:8px; background:radial-gradient(circle at center, #14001a 0%, #05000a 100%); }
  #eventsContainer { display:flex; gap:20px; flex-wrap:wrap; justify-content:center; align-items:center; }
  #orbitCanvas { width:45%; height:400px; }
  #chirpCanvas { width:45%; height:400px; }
  button, select, input { margin:5px; padding:8px; border:none; border-radius:4px; }
  button { background:#8000ff; color:white; cursor:pointer; transition:0.3s; }
  button:hover { background:#a64dff; }
  #eventInfo, #scienceSummary { background:rgba(30,0,40,0.7); padding:10px; border-radius:8px; margin-top:10px; border:1px solid #33003d; }
  #scienceSummary table { width:100%; border-collapse:collapse; margin-top:5px; }
  #scienceSummary th, #scienceSummary td { text-align:left; padding:6px; border-bottom:1px solid #440055; color:#e5ccff; }
  h2,h3 { color:#e5ccff; }
</style>
</head>
<body>

<div class="tabs">
  <button class="tabButton active" data-tab="eventsTab">Events</button>
</div>

<!-- EVENTS TAB -->
<div id="eventsTab" class="tabContent" style="display:block;">
  <h2>üí´ Gravitational-Wave Events</h2>
  <label for="eventSelect">Select Event:</label>
  <select id="eventSelect"></select>
  <button id="runCustomBtn">Run Custom Simulation</button>
  <button id="resetBtn">Reset</button>
  <button id="playChirpBtn">üîä Play Chirp</button><br>
  
  <label>M‚ÇÅ (M‚òâ):</label><input id="m1Input" type="number" value="30" step="0.1">
  <label>M‚ÇÇ (M‚òâ):</label><input id="m2Input" type="number" value="30" step="0.1">
  <label>Spin (a*):</label><input id="spinInput" type="number" value="0.5" step="0.1" min="0" max="1">

  <div id="eventsContainer">
    <canvas id="orbitCanvas" width="500" height="400"></canvas>
    <canvas id="chirpCanvas" width="500" height="400"></canvas>
  </div>

  <div id="eventInfo">
    <strong>Event Information:</strong>
    <p id="eventDescription"></p>
  </div>

  <div id="scienceSummary">
    <strong>Scientific Summary:</strong>
    <table>
      <tr><th>Parameter</th><th>Value</th></tr>
      <tr><td>Chirp Mass (‚Ñ≥)</td><td id="chirpMass">--</td></tr>
      <tr><td>Frequency Range (Hz)</td><td id="freqRange">--</td></tr>
      <tr><td>GW Strain (h)</td><td id="gwStrain">--</td></tr>
      <tr><td>Estimated Distance</td><td id="distance">--</td></tr>
      <tr><td>Merger Year</td><td id="mergerYear">--</td></tr>
    </table>
  </div>
</div>

<script>
/* --- GW EVENT DATA --- */
const gwEvents = {
  "GW150914": {m1:36, m2:29, spin:0.3, year:2015, distance:"1.3 B ly", color:"#a64dff", desc:"First gravitational-wave detection; two BHs merged forming ~62 M‚òâ remnant."},
  "GW170104": {m1:31, m2:19, spin:0.5, year:2017, distance:"3 B ly", color:"#00ccff", desc:"Detected in 2017; intermediate mass merger with moderate spin."},
  "GW170814": {m1:30.5, m2:25.3, spin:0.4, year:2017, distance:"1.7 B ly", color:"#ffcc33", desc:"First triple-detector detection (LIGO + Virgo) of a BH-BH merger."},
  "GW170817": {m1:1.46, m2:1.27, spin:0.05, year:2017, distance:"130 M ly", color:"#66ff99", desc:"Neutron star merger; produced kilonova and gamma-ray burst GRB170817A."},
  "GW190412": {m1:30, m2:8, spin:0.3, year:2019, distance:"1.9 B ly", color:"#ff6699", desc:"Asymmetric BH merger with detectable higher-order modes."},
  "GW190814": {m1:23, m2:2.6, spin:0.05, year:2019, distance:"800 M ly", color:"#66aaff", desc:"Possible BH‚ÄìNS system; secondary may be the lightest BH or heaviest NS."},
  "GW190521": {m1:85, m2:66, spin:0.7, year:2019, distance:"5.3 B ly", color:"#ff66ff", desc:"Most massive binary merger detected; formed ~142 M‚òâ remnant."},
  "GW200105": {m1:8.9, m2:1.9, spin:0.2, year:2020, distance:"900 M ly", color:"#ff884d", desc:"First confident BH‚ÄìNS merger observed."},
  "GW200115": {m1:5.7, m2:1.5, spin:0.3, year:2020, distance:"1 B ly", color:"#99ccff", desc:"Second confirmed BH‚ÄìNS merger event."},
  "Custom": {m1:30, m2:30, spin:0.5, year:"--", distance:"--", color:"#ffffff", desc:"Custom input system parameters."}
};

/* --- Populate dropdown --- */
const eventSelect = document.getElementById("eventSelect");
for (let key in gwEvents) {
  const opt = document.createElement("option");
  opt.value = key;
  opt.text = key;
  eventSelect.add(opt);
}

/* --- Orbit visualization --- */
const orbitCanvas = document.getElementById("orbitCanvas");
const orbitCtx = orbitCanvas.getContext("2d");
let orbitAngle = 0, orbitAnim;

function drawOrbit(m1, m2, spin, color) {
  cancelAnimationFrame(orbitAnim);
  function animate() {
    orbitCtx.clearRect(0, 0, orbitCanvas.width, orbitCanvas.height);
    const cx = orbitCanvas.width/2, cy = orbitCanvas.height/2;
    const r1 = 80, r2 = 160;
    const x1 = cx + Math.cos(orbitAngle)*r1, y1 = cy + Math.sin(orbitAngle)*r1;
    const x2 = cx - Math.cos(orbitAngle)*r2, y2 = cy - Math.sin(orbitAngle)*r2;
    orbitCtx.beginPath(); orbitCtx.arc(x1,y1,10,0,2*Math.PI);
    orbitCtx.fillStyle=color; orbitCtx.fill();
    orbitCtx.beginPath(); orbitCtx.arc(x2,y2,16,0,2*Math.PI);
    orbitCtx.fillStyle="#ffffff"; orbitCtx.fill();
    orbitAngle += 0.02 + spin*0.01;
    orbitAnim = requestAnimationFrame(animate);
  }
  animate();
}

/* --- Chirp waveform --- */
function drawChirp(ctx, color) {
  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
  ctx.beginPath();
  for (let i = 0; i < ctx.canvas.width; i++) {
    const t = i / ctx.canvas.width;
    const amp = Math.pow(t, 3);
    const y = ctx.canvas.height/2 - amp * Math.sin(40 * Math.PI * t * t * 5) * 100;
    i===0 ? ctx.moveTo(i, y) : ctx.lineTo(i, y);
  }
  ctx.strokeStyle = color;
  ctx.lineWidth = 2;
  ctx.stroke();
}

/* --- Chirp sound --- */
function playChirp(fStart, fEnd, duration) {
  const audio = new (window.AudioContext || window.webkitAudioContext)();
  const osc = audio.createOscillator();
  const gain = audio.createGain();
  osc.connect(gain);
  gain.connect(audio.destination);
  osc.frequency.setValueAtTime(fStart, audio.currentTime);
  osc.frequency.exponentialRampToValueAtTime(fEnd, audio.currentTime + duration);
  gain.gain.setValueAtTime(0.2, audio.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.0001, audio.currentTime + duration);
  osc.start();
  osc.stop(audio.currentTime + duration);
}

/* --- Update event display --- */
function updateSummary(m1, m2, event) {
  const chirpMass = Math.pow((m1*m2)**(3/5)/(m1+m2)**(1/5),1);
  document.getElementById('chirpMass').textContent = chirpMass.toFixed(2) + " M‚òâ";
  document.getElementById('freqRange').textContent = "20‚Äì400 Hz";
  document.getElementById('gwStrain').textContent = (4e-21*(chirpMass/30)**(5/3)).toExponential(2);
  document.getElementById('distance').textContent = event.distance;
  document.getElementById('mergerYear').textContent = event.year;
}

function updateEvent(eventKey) {
  const ev = gwEvents[eventKey];
  document.getElementById('eventDescription').textContent = ev.desc;
  drawOrbit(ev.m1, ev.m2, ev.spin, ev.color);
  drawChirp(document.getElementById('chirpCanvas').getContext('2d'), ev.color);
  updateSummary(ev.m1, ev.m2, ev);
}

/* --- Event Handlers --- */
document.getElementById('runCustomBtn').addEventListener('click', ()=>{
  const m1 = parseFloat(document.getElementById('m1Input').value);
  const m2 = parseFloat(document.getElementById('m2Input').value);
  const spin = parseFloat(document.getElementById('spinInput').value);
  gwEvents["Custom"] = {m1,m2,spin,year:"--",distance:"--",color:"#ffffff",desc:`Custom binary system (m‚ÇÅ=${m1}, m‚ÇÇ=${m2}, spin=${spin})`};
  eventSelect.value = "Custom";
  updateEvent("Custom");
});

document.getElementById('resetBtn').addEventListener('click',()=>updateEvent(eventSelect.value));
document.getElementById('playChirpBtn').addEventListener('click',()=>{
  const ev = gwEvents[eventSelect.value];
  const chirpMass = Math.pow((ev.m1*ev.m2)**(3/5)/(ev.m1+ev.m2)**(1/5),1);
  playChirp(30+ev.spin*10, 300+(chirpMass/30)*300, 2);
});
eventSelect.addEventListener('change',()=>updateEvent(eventSelect.value));

updateEvent("GW150914");
</script>
</body>
</html>
