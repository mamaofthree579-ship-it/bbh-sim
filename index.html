<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Black Hole & Gravitational-Wave Simulator</title>
<style>
  body { margin:0; font-family:Arial,sans-serif; background:#05000a; color:white; overflow-x:hidden; }
  .tabs { display:flex; background:#1a001f; border-bottom:2px solid #33003d; }
  .tabButton { flex:1; padding:12px; cursor:pointer; background:#22002b; border:none; color:#e5ccff; font-weight:bold; transition:0.3s; }
  .tabButton:hover { background:#33003d; }
  .tabButton.active { background:#550066; color:white; }
  .tabContent { display:none; padding:20px; }
  canvas { border:1px solid #33003d; border-radius:8px; display:block; margin:15px auto; background:radial-gradient(circle at center, #14001a 0%, #05000a 100%); }
  button, select, input { margin:5px 0; padding:8px; border:none; border-radius:4px; }
  button { background:#8000ff; color:white; cursor:pointer; transition:0.3s; }
  button:hover { background:#a64dff; }
  #resultBox {
    background:rgba(30,0,40,0.7);
    padding:10px;
    border-radius:8px;
    margin-top:15px;
    border:1px solid #33003d;
    opacity:0;
    transition:opacity 1s ease;
  }
  #resultBox.visible { opacity:1; }
  code { color:#ffb3ff; font-family:monospace; }
  h2,h3,h4 { color:#e5ccff; }
</style>
</head>
<body>

<!-- Tabs -->
<div class="tabs">
  <button class="tabButton active" data-tab="overviewTab">Overview</button>
  <button class="tabButton" data-tab="eventsTab">Events</button>
  <button class="tabButton" data-tab="calcTab">Calculators & Simulators</button>
</div>

<!-- Overview -->
<div id="overviewTab" class="tabContent" style="display:block;">
  <h2>üåå Black Hole Overview</h2>
  <p>Observe a rotating black hole surrounded by a glowing accretion disk and distant stars, warped by extreme gravity.</p>
  <canvas id="bhCanvas" width="800" height="400"></canvas>
</div>

<!-- Events -->
<div id="eventsTab" class="tabContent">
  <h2>üí´ Gravitational-Wave Events</h2>
  <label for="eventSelect">Select Event:</label>
  <select id="eventSelect"></select>
  <button id="runCustomBtn">Run Custom Simulation</button>
  <button id="resetBtn">Reset Simulation</button><br>

  <label>M‚ÇÅ (M‚òâ):</label><input id="m1Input" type="number" value="30" step="0.1">
  <label>M‚ÇÇ (M‚òâ):</label><input id="m2Input" type="number" value="30" step="0.1">
  <label>Spin (a*):</label><input id="spinInput" type="number" value="0.5" step="0.1" min="0" max="1"><br>
  
  <canvas id="orbitCanvas" width="700" height="400"></canvas>
  <canvas id="chirpCanvas" width="800" height="200"></canvas>
  <button id="playChirpBtn">üîä Play Chirp</button>

  <div id="eventInfo">
    <strong>Event Information:</strong>
    <p id="eventDescription"></p>
  </div>
</div>

<!-- Calculators & Simulators -->
<div id="calcTab" class="tabContent">
  <h2>üßÆ Calculators & Simulators</h2>
  <p>Model time dilation, dark matter density, and particle decay near black holes.</p>

  <label>Distance from Black Hole (m):</label>
  <input type="number" id="rInput" value="7.8e17" step="1e16"><br>
  <label>Dark Matter Density (kg/m¬≥):</label>
  <input type="number" id="rhoInput" value="1e-21" step="1e-22"><br>
  <label>Quantum Correction:</label>
  <input type="checkbox" id="quantumChk"> Apply Quantum Correction<br>
  <button id="runCalcBtn">Run Simulation</button>

  <canvas id="calcCanvas" width="800" height="200"></canvas>
  <div id="resultBox"></div>
</div>

<script>
// --- Tabs ---
const tabButtons=document.querySelectorAll('.tabButton');
const tabContents=document.querySelectorAll('.tabContent');
tabButtons.forEach(btn=>{
  btn.addEventListener('click',()=>{
    tabButtons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    tabContents.forEach(tc=>tc.style.display='none');
    document.getElementById(btn.dataset.tab).style.display='block';
  });
});

// --- Overview Animation ---
const bhCanvas=document.getElementById('bhCanvas');
const bhCtx=bhCanvas.getContext('2d');
const stars=Array.from({length:150},()=>({
  x:Math.random()*bhCanvas.width,
  y:Math.random()*bhCanvas.height,
  r:Math.random()*1.2,
  tw:Math.random()*2*Math.PI
}));
let bhAngle=0;
function drawBH(){
  bhCtx.clearRect(0,0,bhCanvas.width,bhCanvas.height);
  const cx=bhCanvas.width/2, cy=bhCanvas.height/2;
  const rBH=70;
  stars.forEach(s=>{
    s.tw+=0.05;
    const brightness=0.6+0.4*Math.sin(s.tw);
    if(Math.hypot(s.x-cx,s.y-cy)>rBH+10){
      bhCtx.beginPath();
      bhCtx.arc(s.x,s.y,s.r,0,2*Math.PI);
      bhCtx.fillStyle=`rgba(255,255,255,${brightness})`;
      bhCtx.fill();
    }
  });
  bhCtx.beginPath(); bhCtx.arc(cx,cy,rBH,0,2*Math.PI); bhCtx.fillStyle='black'; bhCtx.fill();
  const grad=bhCtx.createRadialGradient(cx,cy,70,cx,cy,180);
  grad.addColorStop(0,'rgba(255,200,0,0.6)');
  grad.addColorStop(1,'rgba(120,0,180,0.1)');
  bhCtx.beginPath();
  bhCtx.arc(cx,cy,180,0,2*Math.PI);
  bhCtx.strokeStyle=grad;
  bhCtx.lineWidth=8;
  bhCtx.stroke();
  bhAngle+=0.02;
  requestAnimationFrame(drawBH);
}
drawBH();

// --- Calculator Simulation ---
const calcCtx=document.getElementById('calcCanvas').getContext('2d');
function runCalc(){
  const r=parseFloat(document.getElementById('rInput').value);
  const rhoDM=parseFloat(document.getElementById('rhoInput').value);
  const quantum=document.getElementById('quantumChk').checked;

  const G=6.67430e-11, M=4.3e6*1.989e30, c=3e8;
  const gammaTime=Math.sqrt(1-(2*G*M)/(r*c*c));
  const alpha=1e20;
  const gammaDark=1+alpha*rhoDM;
  let gammaEff=gammaTime*gammaDark;
  if(quantum) gammaEff*=1.05;

  calcCtx.clearRect(0,0,800,200);
  calcCtx.beginPath();
  for(let i=0;i<800;i++){
    const t=i/800;
    const y=100 - Math.sin(t*20*Math.PI)*30*Math.exp(-t*gammaEff);
    if(i===0) calcCtx.moveTo(i,y); else calcCtx.lineTo(i,y);
  }
  calcCtx.strokeStyle="#a64dff";
  calcCtx.lineWidth=2;
  calcCtx.stroke();

  const decayRate=(1/gammaEff).toExponential(3);
  const timeDilation=gammaTime.toFixed(6);
  const darkMatterFactor=gammaDark.toFixed(6);
  const resultBox=document.getElementById("resultBox");
  resultBox.innerHTML=`
    <strong>Results:</strong><br>
    <b>Time Dilation (Œ≥‚Çú):</b> ${timeDilation}<br>
    <b>Dark Matter Factor (Œ≥_DM):</b> ${darkMatterFactor}<br>
    <b>Effective Decay Multiplier (Œ≥_eff):</b> ${gammaEff.toFixed(6)}<br>
    <b>Observed Decay Rate (Œì):</b> ${decayRate} s‚Åª¬π<br><br>
    <em>Equations:</em><br>
    <code>Œ≥‚Çú = ‚àö(1 - 2GM / rc¬≤)</code><br>
    <code>Œì_dark = Œì‚ÇÄ (1 + Œ±¬∑œÅ_DM)</code><br>
    <code>Œì_eff = Œì‚ÇÄ / (Œ≥‚Çú √ó Œ≥_DM)</code><br>
    ${quantum ? "<code>+ Quantum correction applied: √ó 1.05</code>" : ""}
    <br><br>
    The combined result shows how gravitational time dilation and local dark matter density 
    near <strong>Sagittarius A*</strong> affect observed decay rates.
  `;
  resultBox.classList.remove('visible');
  void resultBox.offsetWidth; // reflow to restart animation
  resultBox.classList.add('visible');
}
document.getElementById("runCalcBtn").addEventListener("click", runCalc);
</script>
</body>
</html>
