<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sagittarius A* & Gravitational-Wave Simulator</title>
<style>
  body { margin:0; font-family:Arial, sans-serif; background:#05000a; color:white; overflow-x:hidden; }
  .tabs { display:flex; background:#1a001f; border-bottom:2px solid #33003d; }
  .tabButton { flex:1; padding:12px; cursor:pointer; background:#22002b; border:none; color:#e5ccff; font-weight:bold; transition:0.3s; }
  .tabButton:hover { background:#33003d; }
  .tabButton.active { background:#550066; color:white; }
  .tabContent { display:none; padding:20px; }
  canvas { border:1px solid #33003d; border-radius:8px; display:block; margin:15px auto; background:radial-gradient(circle at center, #14001a 0%, #05000a 100%); }
  button, select, input { margin:5px; padding:8px; border:none; border-radius:4px; }
  button { background:#8000ff; color:white; cursor:pointer; transition:0.3s; }
  button:hover { background:#a64dff; }
  input[type=range] { width:300px; }
  #eventInfo, #scienceSummary { background:rgba(30,0,40,0.7); padding:10px; border-radius:8px; margin-top:10px; border:1px solid #33003d; }
  #scienceSummary table { width:100%; border-collapse:collapse; margin-top:5px; }
  #scienceSummary th, #scienceSummary td { text-align:left; padding:6px; border-bottom:1px solid #440055; color:#e5ccff; }
  h2,h3,h4 { color:#e5ccff; }
</style>
</head>
<body>

<!-- Tabs -->
<div class="tabs">
  <button class="tabButton active" data-tab="overviewTab">Overview</button>
  <button class="tabButton" data-tab="eventsTab">Events</button>
  <button class="tabButton" data-tab="calculatorsTab">Calculators</button>
</div>

<!-- OVERVIEW -->
<div id="overviewTab" class="tabContent" style="display:block;">
  <h2>üåå Sagittarius A* Overview</h2>
  <p>Observe the rotating black hole with a luminous accretion disk. Use the slider below to control orbital speed.</p>
  <canvas id="bhCanvas" width="800" height="400"></canvas>

  <div style="text-align:center;">
    <label for="speedSlider">Rotation Speed:</label>
    <input id="speedSlider" type="range" min="0.1" max="2" step="0.05" value="1">
    <span id="speedValue">1.0x</span>
  </div>
</div>

<!-- EVENTS -->
<div id="eventsTab" class="tabContent">
  <h2>üí´ Gravitational-Wave Events</h2>
  <label for="eventSelect">Select Event:</label>
  <select id="eventSelect"></select>
  <button id="runCustomBtn">Run Custom Simulation</button>
  <button id="resetBtn">Reset</button><br>

  <canvas id="orbitCanvas" width="700" height="400"></canvas>
  <canvas id="chirpCanvas" width="800" height="200"></canvas>
  <button id="playChirpBtn">üîä Play Chirp</button>

  <div id="scienceSummary">
    <h3>Event Summary</h3>
    <table>
      <tr><th>Parameter</th><th>Value</th></tr>
      <tr><td>Event</td><td id="eventName">--</td></tr>
      <tr><td>Chirp Mass (‚Ñ≥)</td><td id="chirpMass">--</td></tr>
      <tr><td>Frequency Range (Hz)</td><td id="freqRange">--</td></tr>
      <tr><td>GW Strain (h)</td><td id="gwStrain">--</td></tr>
      <tr><td>Distance</td><td id="distance">--</td></tr>
      <tr><td>Merger Type</td><td id="mergerType">--</td></tr>
    </table>
    <button id="moreInfoBtn">üìò More Info</button>
    <div id="moreInfo" style="display:none; background:rgba(40,0,60,0.8); padding:10px; border-radius:8px; margin-top:10px;"></div>
  </div>
</div>

<!-- CALCULATORS -->
<div id="calculatorsTab" class="tabContent">
  <h2>üßÆ Time Dilation & Dark Matter Calculator</h2>
  <p>Simulate relativistic effects near Sagittarius A* and modify decay rates under varying dark matter densities.</p>
  
  <label>Radius from Black Hole (m):</label>
  <input id="radiusInput" type="number" value="7.8e17" step="1e16">
  <label>Dark Matter Density (œÅ_DM, kg/m¬≥):</label>
  <input id="densityInput" type="number" value="1e-21" step="1e-22">
  <button id="runCalcBtn">Run Simulation</button>
  <div id="calcResults"></div>
  <canvas id="decayCanvas" width="800" height="300"></canvas>
</div>

<script>
// --- Tabs ---
document.querySelectorAll('.tabButton').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.tabButton').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.tabContent').forEach(tc=>tc.style.display='none');
    document.getElementById(btn.dataset.tab).style.display='block';
  });
});

// --- Overview Animation ---
const bhCanvas=document.getElementById('bhCanvas');
const bhCtx=bhCanvas.getContext('2d');
const stars=Array.from({length:150},()=>({x:Math.random()*bhCanvas.width,y:Math.random()*bhCanvas.height,r:Math.random()*1.2,tw:Math.random()*2*Math.PI}));
let bhAngle=0;
let rotationSpeed=1;

function drawBH(){
  bhCtx.clearRect(0,0,bhCanvas.width,bhCanvas.height);
  const cx=bhCanvas.width/2, cy=bhCanvas.height/2, rBH=70;

  // Stars
  stars.forEach(s=>{
    s.tw+=0.05; const b=0.6+0.4*Math.sin(s.tw);
    if(Math.hypot(s.x-cx,s.y-cy)>rBH+20){bhCtx.beginPath();bhCtx.arc(s.x,s.y,s.r,0,2*Math.PI);bhCtx.fillStyle=`rgba(255,255,255,${b})`;bhCtx.fill();}
  });

  // Background
  const grad=bhCtx.createRadialGradient(cx,cy,10,cx,cy,200);
  grad.addColorStop(0,'#000'); grad.addColorStop(1,'#220033');
  bhCtx.fillStyle=grad; bhCtx.fillRect(0,0,bhCanvas.width,bhCanvas.height);

  // Black Hole Core
  bhCtx.beginPath(); bhCtx.arc(cx,cy,rBH,0,2*Math.PI); bhCtx.fillStyle='black'; bhCtx.fill();

  // Accretion Disk
  const hue=(bhAngle*10)%360;
  bhCtx.beginPath(); bhCtx.arc(cx,cy,rBH+30,0,2*Math.PI);
  bhCtx.strokeStyle=`hsl(${hue}, 100%, 60%)`;
  bhCtx.lineWidth=3; bhCtx.stroke();

  // Orbiting Hotspot
  const x=cx+Math.cos(bhAngle)*100, y=cy+Math.sin(bhAngle)*40;
  bhCtx.beginPath(); bhCtx.arc(x,y,6,0,2*Math.PI);
  bhCtx.fillStyle=`hsl(${(hue+180)%360}, 100%, 70%)`; bhCtx.fill();

  bhAngle+=0.03*rotationSpeed;
  requestAnimationFrame(drawBH);
}
drawBH();

// --- Speed Slider ---
const speedSlider=document.getElementById('speedSlider');
const speedValue=document.getElementById('speedValue');
speedSlider.addEventListener('input',()=>{
  rotationSpeed=parseFloat(speedSlider.value);
  speedValue.textContent=rotationSpeed.toFixed(1)+"x";
});

// --- Calculators ---
document.getElementById('runCalcBtn').addEventListener('click',()=>{
  const G=6.67430e-11, M=4.3e6*1.989e30, c=3e8;
  const r=parseFloat(document.getElementById('radiusInput').value);
  const rho=parseFloat(document.getElementById('densityInput').value);
  const gamma=Math.sqrt(1 - (G*M)/(r*c*c));
  const alpha=1e21, Gamma_dark=1*(1+alpha*rho);
  document.getElementById('calcResults').innerHTML=
    `<p>Time Dilation Factor (Œ≥): <b>${gamma.toFixed(6)}</b></p>
     <p>Modified Decay Rate (Œì_dark): <b>${Gamma_dark.toExponential(2)}</b></p>`;
  const ctx=document.getElementById('decayCanvas').getContext('2d');
  ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);
  ctx.beginPath();
  for(let i=0;i<ctx.canvas.width;i++){
    const t=i/ctx.canvas.width, y=ctx.canvas.height/2 - (Math.exp(-Gamma_dark*t)*100);
    i===0?ctx.moveTo(i,y):ctx.lineTo(i,y);
  }
  ctx.strokeStyle="#a64dff"; ctx.lineWidth=2; ctx.stroke();
});

// --- GW Events (simplified retained) ---
const gwEvents={
  "GW150914":{m1:36,m2:29,spin:0.3,dist:"1.3 B ly",strain:"1e-21",freq:"35‚Äì250",type:"BBH",color:"#a64dff"},
  "GW170817":{m1:1.46,m2:1.27,spin:0.05,dist:"130 M ly",strain:"3e-23",freq:"30‚Äì500",type:"BNS",color:"#ffcc00"},
  "GW190521":{m1:85,m2:66,spin:0.7,dist:"5.3 B ly",strain:"6e-21",freq:"30‚Äì80",type:"BBH",color:"#ff66ff"},
  "Custom":{m1:30,m2:30,spin:0.5,dist:"--",strain:"--",freq:"--",type:"Custom",color:"#ffffff"}
};
const eventDescriptions={
  "GW150914":"First detection (LIGO 2015): two black holes merged 1.3B ly away.",
  "GW170817":"First neutron-star merger observed with both GW and EM signals.",
  "GW190521":"Most massive stellar-origin merger detected so far.",
  "Custom":"Custom user-defined binary configuration."
};
const select=document.getElementById('eventSelect');
for(let k in gwEvents){const o=document.createElement('option');o.value=k;o.text=k;select.add(o);}
const orbitCtx=document.getElementById('orbitCanvas').getContext('2d');
let orbitAngle=0;
function drawOrbit(ev){
  cancelAnimationFrame(drawOrbit.anim);
  function loop(){
    orbitCtx.clearRect(0,0,700,400);
    const cx=350,cy=200,r1=80,r2=160;
    const x1=cx+Math.cos(orbitAngle)*r1, y1=cy+Math.sin(orbitAngle)*r1;
    const x2=cx-Math.cos(orbitAngle)*r2, y2=cy-Math.sin(orbitAngle)*r2;
    orbitCtx.beginPath(); orbitCtx.arc(x1,y1,10,0,2*Math.PI); orbitCtx.fillStyle=ev.color; orbitCtx.fill();
    orbitCtx.beginPath(); orbitCtx.arc(x2,y2,16,0,2*Math.PI); orbitCtx.fillStyle='#fff'; orbitCtx.fill();
    orbitAngle+=0.02+ev.spin*0.01;
    drawOrbit.anim=requestAnimationFrame(loop);
  } loop();
}
const chirpCtx=document.getElementById('chirpCanvas').getContext('2d');
function drawChirp(ev){
  chirpCtx.clearRect(0,0,800,200);
  chirpCtx.beginPath();
  for(let i=0;i<800;i++){
    const t=i/800,y=100-Math.sin(40*t*t*Math.PI)*t*80;
    i===0?chirpCtx.moveTo(i,y):chirpCtx.lineTo(i,y);
  }
  chirpCtx.strokeStyle=ev.color;chirpCtx.lineWidth=2;chirpCtx.stroke();
}
function updateEvent(k){
  const ev=gwEvents[k];
  document.getElementById('eventName').textContent=k;
  document.getElementById('chirpMass').textContent=((ev.m1*ev.m2)**(3/5)/(ev.m1+ev.m2)**(1/5)).toFixed(2)+" M‚òâ";
  document.getElementById('freqRange').textContent=ev.freq+" Hz";
  document.getElementById('gwStrain').textContent=ev.strain;
  document.getElementById('distance').textContent=ev.dist;
  document.getElementById('mergerType').textContent=ev.type;
  drawOrbit(ev); drawChirp(ev);
}
document.getElementById('moreInfoBtn').addEventListener('click',()=>{
  const key=select.value;
  const box=document.getElementById('moreInfo');
  box.textContent=eventDescriptions[key];
  box.style.display=box.style.display==='block'?'none':'block';
});
select.addEventListener('change',()=>updateEvent(select.value));
updateEvent('GW150914');
</script>
</body>
</html>
