<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Black Hole Simulator ‚Äî Dynamic Horizon</title>
<style>
  :root{
    --bg:#05000a; --panel:#1a001f; --accent:#8000ff; --muted:#33003d; --text:#e5ccff;
  }
  body{margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;}
  .tabs{display:flex;background:var(--panel);border-bottom:2px solid var(--muted);}
  .tabButton{flex:1;padding:12px;cursor:pointer;background:transparent;border:0;color:var(--text);font-weight:700}
  .tabButton.active{background:var(--accent);color:#fff}
  .container{padding:18px}
  h2{margin:6px 0 10px;color:var(--text)}
  canvas{display:block;margin:12px auto;border-radius:8px;background:radial-gradient(circle at center,#14001a 0%, #05000a 100%);box-shadow:0 6px 18px rgba(0,0,0,0.6);}
  .panel{background:rgba(30,0,40,0.6);padding:12px;border-radius:10px;border:1px solid var(--muted);max-width:1180px;margin:12px auto}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .small{font-size:0.9rem;color:#d6c7ff}
  .muted{color:#bdaeff}
  .btn{background:var(--accent);border-radius:6px;color:white;padding:8px 12px;border:0;cursor:pointer}
  .legend{display:flex;gap:16px;align-items:center;justify-content:center;margin-top:8px;color:var(--text);font-size:0.95rem}
  .swatch{width:18px;height:10px;border-radius:4px;display:inline-block;margin-right:6px;vertical-align:middle;border:1px solid rgba(255,255,255,0.06)}
  .tooltip { position: absolute; background: rgba(20,10,30,0.95); color: #fff; padding:8px; border-radius:6px; border:1px solid rgba(120,90,200,0.25); max-width:420px; font-size:0.95rem; display:none; z-index:1000; }
</style>
</head>
<body>

<!-- Tabs -->
<div class="tabs">
  <button class="tabButton active" data-tab="overviewTab">Overview</button>
  <button class="tabButton" data-tab="eventsTab">Events</button>
  <button class="tabButton" data-tab="calculatorsTab">Calculators</button>
</div>

<!-- Overview -->
<div id="overviewTab" class="container tabContent" style="display:block">
  <h2>üåå Sagittarius A* Overview</h2>
  <div class="panel">
    <p class="small">Dynamic visualization: black hole horizon changes with hotspot speed (energy feedback).</p>
    <canvas id="bhCanvas" width="920" height="420"></canvas>
    <div class="legend">
      <div><span class="swatch" style="background:rgba(140,80,255,0.35)"></span>Event Horizon</div>
      <div><span class="swatch" style="background:rgba(255,180,80,0.22)"></span>Accretion Disk</div>
      <div><span class="swatch" style="background:rgba(120,200,255,0.18)"></span>Relativistic Jet</div>
    </div>
    <div class="row" style="margin-top:8px;">
      <label>Hotspot Speed</label>
      <input type="range" id="speedSlider" min="0.1" max="3" step="0.05" value="1" style="flex:1">
      <span id="speedVal" class="muted">1.0√ó</span>
    </div>
  </div>
</div>

<!-- Events -->
<div id="eventsTab" class="container tabContent" style="display:none">
  <h2>üí´ Gravitational-Wave Events</h2>
  <div class="panel">
    <p class="small">Event visuals and data coming soon.</p>
  </div>
</div>

<!-- Calculators -->
<div id="calculatorsTab" class="container tabContent" style="display:none">
  <h2>üßÆ Calculators</h2>
  <div class="panel">
    <label>Radius r (m)</label><input id="radiusInput" type="number" value="7.8e17">
    <label>Dark Matter œÅ_DM (kg/m¬≥)</label><input id="densityInput" type="number" value="1e-21">
    <button id="runCalcBtn" class="btn">Run</button>
    <div id="calcResults" style="margin-top:8px;color:#ffd;"></div>
  </div>
</div>

<div id="tooltip" class="tooltip"></div>

<script>
// --- Tabs ---
document.querySelectorAll('.tabButton').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('.tabButton').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.tabContent').forEach(c=>c.style.display='none');
    document.getElementById(btn.dataset.tab).style.display='block';
  });
});

// --- Overview Canvas ---
const bhCanvas = document.getElementById('bhCanvas');
const ctx = bhCanvas.getContext('2d');
const W = bhCanvas.width, H = bhCanvas.height;
const cx = W/2, cy = H/2;
let baseHorizon = 70;
let speedFactor = 1;
const stars = Array.from({length:200},()=>({x:Math.random()*W,y:Math.random()*H,r:0.5+Math.random()*1.2,phi:Math.random()*Math.PI*2}));
let angle=0, trail=[];

const speedSlider=document.getElementById('speedSlider');
const speedVal=document.getElementById('speedVal');
speedSlider.addEventListener('input',()=>{
  speedFactor=parseFloat(speedSlider.value);
  speedVal.textContent=speedFactor.toFixed(2)+"√ó";
});

function drawBH(){
  ctx.clearRect(0,0,W,H);
  const g=ctx.createRadialGradient(cx,cy,10,cx,cy,300);
  g.addColorStop(0,"#070012"); g.addColorStop(1,"#010006");
  ctx.fillStyle=g; ctx.fillRect(0,0,W,H);

  // Stars
  for(const s of stars){
    s.phi += 0.01;
    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fillStyle=`rgba(255,255,255,${0.3+0.3*Math.sin(s.phi)})`;
    ctx.fill();
  }

  // Horizon radius grows with speed (dynamic)
  const horizonR = baseHorizon + (speedFactor-1)*10;
  const rimGlow = Math.min(0.35 + (speedFactor-1)*0.15, 0.65);

  // Disk
  for(let i=0;i<40;i++){
    ctx.beginPath();
    ctx.arc(cx,cy,horizonR+8+i*3,0,Math.PI*2);
    ctx.strokeStyle=`rgba(255,180,80,${0.006+i*0.0006})`;
    ctx.stroke();
  }

  // Horizon ring
  ctx.beginPath();
  ctx.arc(cx,cy,horizonR,0,Math.PI*2);
  ctx.strokeStyle=`rgba(140,80,255,${rimGlow})`;
  ctx.lineWidth=2; ctx.stroke();

  // Jet
  ctx.fillStyle='rgba(120,200,255,0.05)';
  ctx.fillRect(cx-5,0,10,cy-120);

  // Center
  ctx.beginPath();
  ctx.arc(cx,cy,horizonR,0,Math.PI*2);
  ctx.fillStyle='black';
  ctx.fill();

  // Hotspot motion
  angle += 0.03 * speedFactor;
  const rOrbit = horizonR + 50;
  const hx = cx + Math.cos(angle)*rOrbit;
  const hy = cy + Math.sin(angle)*rOrbit*0.7;
  trail.unshift({x:hx,y:hy});
  if(trail.length>25) trail.pop();

  // Trail
  for(let i=0;i<trail.length;i++){
    ctx.beginPath();
    ctx.arc(trail[i].x,trail[i].y,4-i*0.12,0,Math.PI*2);
    ctx.fillStyle=`rgba(255,220,180,${0.12*(25-i)})`;
    ctx.fill();
  }

  // Hotspot
  ctx.beginPath();
  ctx.arc(hx,hy,6,0,Math.PI*2);
  ctx.fillStyle='#ffcc99';
  ctx.fill();

  requestAnimationFrame(drawBH);
}
drawBH();

// --- Calculator ---
document.getElementById('runCalcBtn').addEventListener('click',()=>{
  const G=6.6743e-11,M=4.3e6*1.989e30,c=3e8;
  const r=Number(document.getElementById('radiusInput').value)||7.8e17;
  const rho=Number(document.getElementById('densityInput').value)||1e-21;
  const gamma=Math.sqrt(Math.max(0,1-(G*M)/(r*c*c)));
  const alpha=1e21;
  const Gamma_dark=1*(1+alpha*rho);
  document.getElementById('calcResults').innerHTML=`Œ≥=<b>${gamma.toFixed(6)}</b> | Œì_dark‚âà<b>${Gamma_dark.toExponential(2)}</b>`;
});
</script>
</body>
</html>
